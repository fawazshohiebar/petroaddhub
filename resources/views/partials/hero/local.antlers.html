<section class="relative min-h-screen overflow-hidden -mt-34 pt-34">
    <!-- Local Video Background -->
    <div class="absolute inset-0 w-full h-full z-0 video-container">
        <video id="local-video" class="local-video" autoplay muted loop playsinline>
            <source src="{{video}}" type="video/{{ video | explode('.') | last }}">
            <!-- You can add fallback formats here if needed -->
            <!-- <source src="/videos/video.mp4" type="video/mp4"> -->
            Your browser does not support the video tag.
        </video>
        <!-- Dark Overlay -->
        <div class="absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-black/30 z-10"></div>
    </div>

    
    {{partial:hero/content}}

    {{ partial:hero/scroll }}
</section>

<script>
    // Function to resize the video to cover the container
    function resizeVideo() {
        var video = document.querySelector('#local-video');
        if (!video) return;

        var container = document.querySelector('.video-container');
        var containerWidth = container.offsetWidth;
        var containerHeight = container.offsetHeight;
        var containerRatio = containerWidth / containerHeight;

        // Get the native video aspect ratio
        var videoRatio = video.videoWidth / video.videoHeight;
        if (videoRatio === 0) {
            // If video is not loaded yet, use 16:9 as default
            videoRatio = 16 / 9;
        }

        var newWidth, newHeight;

        // Decide whether to fit by width or height to ensure complete coverage
        if (containerRatio > videoRatio) {
            // Container is wider than video aspect ratio
            newWidth = containerWidth;
            newHeight = containerWidth / videoRatio;
        } else {
            // Container is taller than video aspect ratio
            newWidth = containerHeight * videoRatio;
            newHeight = containerHeight;
        }

        // Position the video to center it
        video.style.width = newWidth + 'px';
        video.style.height = newHeight + 'px';
        video.style.position = 'absolute';
        video.style.left = ((containerWidth - newWidth) / 2) + 'px';
        video.style.top = ((containerHeight - newHeight) / 2) + 'px';
    }

    // Initialize video and resize handling
    document.addEventListener('DOMContentLoaded', function() {
        var video = document.querySelector('#local-video');
        
        if (video) {
            // Resize when video metadata is loaded
            video.addEventListener('loadedmetadata', function() {
                resizeVideo();
            });
            
            // Resize when window size changes
            window.addEventListener('resize', resizeVideo);
            
            // Handle video end (although we have loop attribute, this is a fallback)
            video.addEventListener('ended', function() {
                video.play();
            });
        }

        // CSS Animation for the hero section
        document.head.insertAdjacentHTML('beforeend', `
            <style>
                .video-container {
                    overflow: hidden;
                }
                
                .local-video {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }
                
                .animate-fade-in-down {
                    animation: fadeInDown 1s ease forwards;
                }
                
                .animate-fade-in-up {
                    animation: fadeInUp 1s ease forwards;
                }
                
                @keyframes fadeInDown {
                    from {
                        opacity: 0;
                        transform: translateY(-30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
            </style>
        `);
    });
</script>